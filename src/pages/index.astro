---
// index.astro
import Layout from '../layouts/Layout.astro';
import Marquee from '../components/Marquee.astro';
import Features from '../components/Features.astro';
import SelectedWork from '../components/SelectedWork.astro';
import Hero from '../components/Hero.astro';
import Services from '../components/Services.astro';
---

<Layout title="Olmo Studio - Creative Digital, Design Studio.">
  
  <Hero />

  <div class="relative z-10 bg-brutal-white dark:bg-brutal-black">
    <!-- CARDS SECTION (Black Background) -->
    <section class="bg-brutal-black text-brutal-white py-32 px-8">
    <div class="max-w-screen-xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
      
      <!-- Card 1 -->
      <div class="card-item opacity-0 max-md:mt-8 bg-[#151515] p-12 rounded-3xl flex flex-col justify-end aspect-square border border-brutal-white/5 hover:border-brutal-orange transition-colors group">
        <div class="bg-brutal-white text-brutal-black w-14 h-14 rounded-2xl flex items-center justify-center mb-auto">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>
        </div>
        <h3 class="font-heading text-5xl uppercase tracking-tight mb-4 group-hover:text-brutal-orange transition-colors flex flex-col gap-2 md:gap-4 pb-2">
          <span>Committed to</span>
          <span>Perfection</span>
        </h3>
        <p class="font-body opacity-70 text-lg max-w-sm">We iterate and refine until the result is exactly what you need.</p>
      </div>

      <!-- Card 2 -->
      <div class="card-item opacity-0 bg-brutal-black p-12 rounded-3xl flex flex-col justify-end aspect-square border border-brutal-white/5 relative overflow-hidden hover:border-brutal-orange transition-colors group">
        <div class="absolute inset-0 z-0">
          <img src="https://images.unsplash.com/photo-1522071820081-009f0129c71c?auto=format&fit=crop&q=80&w=2850&ixlib=rb-4.0.3" alt="Team working" class="w-full h-full object-cover opacity-40 group-hover:scale-105 transition-transform duration-700" />
          <div class="absolute inset-0 bg-gradient-to-t from-brutal-black to-transparent"></div>
        </div>
        <div class="relative z-10 w-full mb-auto">
          <div class="bg-brutal-white text-brutal-black w-14 h-14 rounded-2xl flex items-center justify-center">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
          </div>
        </div>
        <div class="relative z-10">
          <h3 class="font-heading text-5xl uppercase tracking-tight mb-4 group-hover:text-brutal-orange transition-colors flex flex-col gap-2 md:gap-4 pb-2">
            <span>Quality over</span>
            <span>quantity</span>
          </h3>
          <p class="font-body opacity-70 text-lg max-w-sm">We take on fewer projects so each one gets the attention, detail, and care it deserves.</p>
        </div>
      </div>

    </div>
  </section>

  <!-- SERVICES INTERACTIVE LIST -->
  <Services />

  <!-- MARQUEE DIVIDER SECTION -->
  <Marquee text="ABOUT US" />

  <!-- FEATURES (WHY CHOOSE US) SECTION -->
  <Features />

  <!-- SELECTED WORKS SECTION -->
  <SelectedWork />

  </div>
</Layout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  function initIndexAnimations() {
    const cards = gsap.utils.toArray('.card-item');
    if (cards.length > 0) {
      gsap.fromTo(cards, 
        { y: 100, opacity: 0 },
        {
          scrollTrigger: {
            trigger: cards[0] as Element,
            start: "top 85%",
            toggleActions: "play none none reverse"
          },
          y: 0,
          opacity: 1,
          duration: 1.2,
          stagger: 0.2,
          ease: "power4.out"
        }
      );
    }
  }

  document.addEventListener('astro:page-load', initIndexAnimations);
  if (document.readyState === 'complete' || document.readyState === 'interactive') {
    initIndexAnimations();
  } else {
    document.addEventListener('DOMContentLoaded', initIndexAnimations);
  }
</script>
