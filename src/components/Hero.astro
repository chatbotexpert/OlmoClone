---
// Hero.astro
---

<!-- HERO SECTION -->
<section class="relative min-h-[90vh] md:h-screen w-full flex flex-col justify-end pb-12 pt-32 px-4 md:px-8 overflow-hidden bg-brutal-black">
  <!-- Background Image placeholder -->
  <div class="absolute inset-0 z-0">
    <img 
      src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&q=80&w=3276&ixlib=rb-4.0.3" 
      alt="Creative Studio" 
      class="w-full h-full object-cover opacity-60" 
    />
    <div class="absolute inset-0 bg-gradient-to-t from-brutal-black via-brutal-black/20 to-brutal-black/60"></div>
  </div>

  <!-- Content -->
  <div class="relative z-10 w-full max-w-screen-2xl mx-auto flex flex-col gap-16 md:gap-32">
    
    <!-- Headline Container -->
    <div class="overflow-hidden clip-mask">
      <h1 id="hero-headline" class="font-heading font-bold text-4xl md:text-5xl lg:text-7xl tracking-normal uppercase text-brutal-white max-w-5xl clip-text-reveal flex flex-col gap-4 md:gap-8 leading-[1.1] md:leading-[1.1]">
        <span class="block overflow-hidden clip-mask pb-2"><span class="block translate-y-[120%] opacity-0">Creative Digital,</span></span>
        <span class="block overflow-hidden clip-mask pb-2"><span class="block translate-y-[120%] opacity-0">Design Studio<span class="text-brutal-orange">.</span></span></span>
      </h1>
    </div>

  </div>
</section>

<!-- STATEMENT SECTION (White Background) -->
<section class="bg-brutal-white text-brutal-black py-24 md:py-40 px-4 md:px-8 border-b border-brutal-black/10">
  <div class="max-w-screen-xl mx-auto text-center flex flex-col items-center gap-12">
    
    <div class="overflow-hidden w-full clip-mask">
      <h2 id="hero-statement" class="font-heading font-bold text-3xl md:text-4xl lg:text-5xl tracking-normal uppercase max-w-4xl mx-auto clip-text-reveal flex flex-col gap-2 md:gap-4 mt-8">
        <span class="block overflow-hidden clip-mask pb-2 leading-[1.3]"><span class="block translate-y-[120%] opacity-0">We design digital experiences</span></span>
        <span class="block overflow-hidden clip-mask pb-2 leading-[1.3]"><span class="block translate-y-[120%] opacity-0">that empower 
          <!-- Inline Barcode Pill Visual -->
          <span class="inline-block align-middle mx-4 md:w-20 h-8 md:h-10 bg-brutal-black rounded-full overflow-hidden relative" style="transform: translateY(-5%);">
            <!-- Simulated barcode lines via repeating linear gradient -->
            <span class="absolute inset-0 bg-[repeating-linear-gradient(90deg,transparent_0_4px,#f4f4f4_4px_8px)] opacity-50 mix-blend-difference"></span>
          </span>
          brands to
        </span></span>
        <span class="block overflow-hidden clip-mask pb-2 leading-[1.3]"><span class="block translate-y-[120%] opacity-0">stand out and engage their</span></span>
        <span class="block overflow-hidden clip-mask pb-2 leading-[1.3]"><span class="block translate-y-[120%] opacity-0">audiencesâ„¢<span class="text-brutal-orange text-[0.8em]">.</span></span></span>
      </h2>
    </div>
    
    <div class="overflow-hidden mt-6">
      <p id="hero-paragraph" class="font-body text-lg md:text-2xl max-w-3xl mx-auto font-medium opacity-80 leading-relaxed translate-y-full opacity-0">
        By combining strategy, design, and technology, we transform ideas into 
        meaningful digital experiences. Our work blends imagination with 
        precision to create bold outcomes that drive growth.
      </p>
    </div>

    <div class="overflow-hidden mt-8">
      <a href="/about" id="hero-button" class="inline-block bg-brutal-black text-brutal-white px-8 md:px-10 py-4 md:py-5 rounded-full font-body font-bold uppercase tracking-widest text-xs md:text-sm hover:-translate-y-1 hover:shadow-[6px_6px_0_0_#f25b2a] transition-all translate-y-full opacity-0">
        More About Us
      </a>
    </div>

  </div>

  <div class="mt-24 md:mt-32 border-t border-brutal-black/20 pt-8 text-center uppercase tracking-widest text-xs font-semibold opacity-50">
    Global Partners :
  </div>
</section>

<style>
  /* Base helper for the clip reveal wrapper if JS is disabled */
  .no-js .clip-text-reveal span.block span.block {
    transform: translateY(0);
    opacity: 1;
  }
  .no-js #hero-paragraph, .no-js #hero-button {
    transform: translateY(0);
    opacity: 1;
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  function initHeroAnimations() {
    // 1. Initial Page Load Animation for Hero Headline
    // Select the inner spans that hold the actual text
    const headlineLines = gsap.utils.toArray('#hero-headline > span > span');
    
    if (headlineLines.length > 0) {
      gsap.to(headlineLines, {
        y: 0,
        opacity: 1,
        duration: 1.2,
        stagger: 0.15,
        ease: "power4.out",
        delay: 0.2
      });
    }

    // 2. ScrollTrigger Reveal for the Statement Section below
    const statementLines = gsap.utils.toArray('#hero-statement > span > span');
    
    if (statementLines.length > 0) {
      gsap.to(statementLines, {
        scrollTrigger: {
          trigger: '#hero-statement',
          start: "top 85%", // Trigger when the top of the h2 hits 85% of the viewport height
          toggleActions: "play none none reverse"
        },
        y: 0,
        opacity: 1,
        duration: 1.2,
        stagger: 0.1,
        ease: "power4.out"
      });
    }

    // Paragraph Reveal
    const paragraph = document.getElementById('hero-paragraph');
    if (paragraph) {
      gsap.to(paragraph, {
        scrollTrigger: {
          trigger: paragraph,
          start: "top 90%",
          toggleActions: "play none none reverse"
        },
        y: 0,
        opacity: 1,
        duration: 1,
        ease: "power3.out",
        delay: 0.2 // slightly after the statement starts
      });
    }

    // Button Reveal
    const button = document.getElementById('hero-button');
    if (button) {
      gsap.to(button, {
        scrollTrigger: {
          trigger: button,
          start: "top 95%",
          toggleActions: "play none none reverse"
        },
        y: 0,
        opacity: 1,
        duration: 0.8,
        ease: "back.out(1.7)", // Add a little pop to the button
        delay: 0.3
      });
    }
  }

  // Ensure animations play nicely with Astro View Transitions
  document.addEventListener('astro:page-load', initHeroAnimations);
  
  if (document.readyState === 'complete' || document.readyState === 'interactive') {
    initHeroAnimations();
  } else {
    document.addEventListener('DOMContentLoaded', initHeroAnimations);
  }
</script>
